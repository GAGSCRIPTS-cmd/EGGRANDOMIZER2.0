-- ü•ö EGG RANDOMIZER GUI - Made by GROW A GARDEN SCRIPTERS

local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local LocalPlayer = Players.LocalPlayer

-- Config
local DETECTION_RANGE = 30
local PREDICTION_INTERVAL = 8 -- 8 second cooldown before randomize again
local ESP_ENABLED = true
local RANDOMIZER_ENABLED = false -- Start OFF, user toggles it
local cooldown = 0

local EGG_LIST = {
    "Bug Egg", "Night Egg", "Mythical Egg", "Paradise Egg",
    "Oasis Egg", "Primal Egg", "Dinosaur Egg"
}

local PET_POOL = {
    ["Bug Egg"] = {"Snail", "Giant Ant", "Praying Mantis", "Dragonfly"},
    ["Night Egg"] = {"Echo Frog", "Raccoon", "Night Owl", "Hedgehog", "Caterpillar"},
    ["Mythical Egg"] = {"Squirrel", "Red Giant Ant", "Grey Mouse", "Brown Mouse"},
    ["Paradise Egg"] = {"Ostrich", "Peacock", "Capybara", "Mimic Octopus"},
    ["Oasis Egg"] = {"Meerkat", "Sandsnake", "Oxolotl", "Fennec Fox"}, -- Added Fennec Fox here
    ["Primal Egg"] = {"Parasaurolophus", "Iguanodon", "Dilophosaurus", "Ankylosaurus", "Spinosaurus", "Triceratops"},
    ["Dinosaur Egg"] = {"T-Rex", "Raptor", "Triceratops", "Pterodactyl", "Brontosaurus"}
}

-- Target pets that stop the randomizer
local TARGET_PETS = {
    ["Bug Egg"] = {"Dragonfly"},
    ["Night Egg"] = {"Raccoon"},
    ["Mythical Egg"] = {"Squirrel"},
    ["Paradise Egg"] = {"Mimic Octopus"},
    ["Oasis Egg"] = {"Fennec Fox"},
    ["Primal Egg"] = {"Spinosaurus", "Ankylosaurus"},
    ["Dinosaur Egg"] = {"T-Rex"}
}

local activeEggs = {}

local function getRandomPet(eggName)
    local pool = PET_POOL[eggName]
    return pool and pool[math.random(1, #pool)] or "Unknown"
end

-- Check if predicted pet is one of the target pets for the egg
local function isTargetFound(eggName, petName)
    local targets = TARGET_PETS[eggName]
    if not targets then return false end
    for _, target in ipairs(targets) do
        if petName == target then
            return true
        end
    end
    return false
end

-- ESP Billboard
local function attachUI(egg, predicted)
    local part = egg:FindFirstChildWhichIsA("BasePart")
    if not part then return end

    local gui = egg:FindFirstChild("PredictionUI")
    if not gui then
        gui = Instance.new("BillboardGui")
        gui.Name = "PredictionUI"
        gui.Adornee = part
        gui.Size = UDim2.new(0, 140, 0, 45)
        gui.StudsOffset = Vector3.new(0, 3, 0)
        gui.AlwaysOnTop = true
        gui.Parent = egg

        local label = Instance.new("TextLabel", gui)
        label.Name = "Label"
        label.Size = UDim2.new(1, 0, 1, 0)
        label.BackgroundTransparency = 1
        label.TextColor3 = Color3.new(1, 1, 0)
        label.TextScaled = true
        label.Font = Enum.Font.GothamBold
        label.Text = ""
    end

    local label = gui:FindFirstChild("Label")
    if label then
        label.Text = ESP_ENABLED and string.format("%s ‚Üí\n%s", egg.Name, predicted) or ""
    end

    gui.Enabled = ESP_ENABLED
end

-- GUI Panel
local function createControlPanel()
    local gui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
    gui.Name = "EggRandomizerGui"

    local frame = Instance.new("Frame", gui)
    frame.Size = UDim2.new(0, 270, 0, 240)
    frame.Position = UDim2.new(0.02, 0, 0.25, 0)
    frame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    frame.BorderSizePixel = 0
    frame.Active = true
    frame.Draggable = true

    local title = Instance.new("TextLabel", frame)
    title.Size = UDim2.new(1, 0, 0, 30)
    title.Text = "ü•ö EGG RANDOMIZER"
    title.Font = Enum.Font.GothamBold
    title.TextColor3 = Color3.new(1, 1, 1)
    title.BackgroundTransparency = 1
    title.TextScaled = true

    local espBtn = Instance.new("TextButton", frame)
    espBtn.Size = UDim2.new(1, -20, 0, 40)
    espBtn.Position = UDim2.new(0, 10, 0, 40)
    espBtn.Font = Enum.Font.GothamBold
    espBtn.TextScaled = true
    espBtn.TextColor3 = Color3.new(1, 1, 1)
    espBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
    espBtn.Text = "üîç ESP: ON"
    espBtn.MouseButton1Click:Connect(function()
        ESP_ENABLED = not ESP_ENABLED
        espBtn.Text = ESP_ENABLED and "üîç ESP: ON" or "üîí ESP: OFF"
        espBtn.BackgroundColor3 = ESP_ENABLED and Color3.fromRGB(0,170,0) or Color3.fromRGB(170,0,0)
    end)

    local randBtn = Instance.new("TextButton", frame)
    randBtn.Size = UDim2.new(1, -20, 0, 40)
    randBtn.Position = UDim2.new(0, 10, 0, 90)
    randBtn.Font = Enum.Font.GothamBold
    randBtn.TextScaled = true
    randBtn.TextColor3 = Color3.new(1, 1, 1)
    randBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
    randBtn.Text = "üé≤ RANDOMIZER: OFF"
    randBtn.MouseButton1Click:Connect(function()
        if cooldown > 0 then
            -- Prevent toggling on during cooldown
            return
        end
        RANDOMIZER_ENABLED = not RANDOMIZER_ENABLED
        if RANDOMIZER_ENABLED then
            randBtn.Text = "üé≤ RANDOMIZER: ON (‚è± 8s)"
            randBtn.BackgroundColor3 = Color3.fromRGB(0,170,0)
            cooldown = PREDICTION_INTERVAL
        else
            randBtn.Text = "üõë RANDOMIZER: OFF"
            randBtn.BackgroundColor3 = Color3.fromRGB(170,0,0)
        end
    end)

    local stopBtn = Instance.new("TextButton", frame)
    stopBtn.Size = UDim2.new(1, -20, 0, 40)
    stopBtn.Position = UDim2.new(0, 10, 0, 140)
    stopBtn.Text = "üõë STOP"
    stopBtn.Font = Enum.Font.GothamBold
    stopBtn.TextScaled = true
    stopBtn.TextColor3 = Color3.new(1, 1, 1)
    stopBtn.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
    stopBtn.MouseButton1Click:Connect(function()
        RANDOMIZER_ENABLED = false
        cooldown = 0
        randBtn.Text = "üõë RANDOMIZER: OFF"
        randBtn.BackgroundColor3 = Color3.fromRGB(170,0,0)
    end)

    local footer = Instance.new("TextLabel", frame)
    footer.Size = UDim2.new(1, 0, 0, 20)
    footer.Position = UDim2.new(0, 0, 1, -20)
    footer.Text = "Made by GROW A GARDEN SCRIPTERS"
    footer.Font = Enum.Font.Gotham
    footer.TextColor3 = Color3.fromRGB(200, 200, 200)
    footer.BackgroundTransparency = 1
    footer.TextScaled = true

    -- Countdown display label
    local countdownLabel = Instance.new("TextLabel", frame)
    countdownLabel.Size = UDim2.new(1, -20, 0, 25)
    countdownLabel.Position = UDim2.new(0, 10, 0, 190)
    countdownLabel.BackgroundTransparency = 1
    countdownLabel.Font = Enum.Font.GothamBold
    countdownLabel.TextColor3 = Color3.new(1,1,1)
    countdownLabel.TextScaled = true
    countdownLabel.Text = "Cooldown: 0s"

    return randBtn, countdownLabel
end

local randBtn, countdownLabel = createControlPanel()

-- Egg Detection + Prediction Loop
task.spawn(function()
    while true do
        local char = LocalPlayer.Character
        local root = char and char:FindFirstChild("HumanoidRootPart")
        if not root then task.wait(1) continue end

        -- Detect eggs in range and add to activeEggs if not present
        for _, obj in ipairs(Workspace:GetDescendants()) do
            if table.find(EGG_LIST, obj.Name) and obj:IsA("Model") and not activeEggs[obj] then
                local part = obj:FindFirstChildWhichIsA("BasePart")
                if part and (part.Position - root.Position).Magnitude <= DETECTION_RANGE then
                    activeEggs[obj] = {
                        predicted = getRandomPet(obj.Name),
                        countdown = 0
                    }
                end
            end
        end

        -- Handle cooldown countdown
        if cooldown > 0 then
            cooldown = cooldown - 1
            countdownLabel.Text = ("Cooldown: %ds"):format(cooldown)
            if cooldown == 0 and RANDOMIZER_ENABLED then
                -- Allow next randomization after cooldown ends
                randBtn.Text = "üé≤ RANDOMIZER: ON (‚è± 8s)"
            else
                randBtn.Text = "üé≤ RANDOMIZER: ON (‚è± "..cooldown.."s)"
            end
        end

        for egg, data in pairs(activeEggs) do
            if egg and egg.Parent then
                if RANDOMIZER_ENABLED and cooldown == 0 then
                    -- Randomize result and reset cooldown
                    data.predicted = getRandomPet(egg.Name)
                    cooldown = PREDICTION_INTERVAL
                end

                attachUI(egg, data.predicted)

                -- Check if predicted pet is target pet; if yes, stop randomizer and notify
                if isTargetFound(egg.Name, data.predicted) then
                    RANDOMIZER_ENABLED = false
                    randBtn.Text = "üõë RANDOMIZER: OFF"
                    randBtn.BackgroundColor3 = Color3.fromRGB(170,0,0)
                    cooldown = 0
                    countdownLabel.Text = "DIVINE EGG WAS FOUND ü•ö"
                    print("DIVINE EGG WAS FOUND ü•ö - " .. egg.Name .. ": " .. data.predicted)
                end
            else
                activeEggs[egg] = nil
            end
        end

        task.wait(1)
    end
end)
